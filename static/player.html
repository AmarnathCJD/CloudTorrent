<!DOCTYPE html>
<html>

<head>
    <meta name="og:title" content="Video Player" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, user-scalable=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.2/plyr.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css">
    <style>
        @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css");

        [data-theme="dark"] {
            background-color: #111 !important;
            color: #eee;
        }

        [data-theme="dark"] .bg-black {
            background-color: #fff !important;
        }

        [data-theme="dark"] .bg-dark {
            background-color: #eee !important;
        }

        [data-theme="dark"] .bg-light {
            background-color: #222 !important;
        }

        [data-theme="dark"] .bg-white {
            background-color: #000 !important;
        }

        html {
            --plyr-color-main: #f18f35;
            --plyr-color-main-hover: #c26917;
        }

        .container {
            max-width: 750px;
        }

        @media screen and (min-width: 768px) {
            .container {
                max-width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container d-flex p-3 mx-auto w-100 flex-column">
        <header class="mb-auto">
            <div class="float-md-start fw-bold fs-5">
                <h1><i class="bi bi-play-fill" style="color: rgb(192, 127, 41);"></i> Player</h1>
            </div>
            <nav class="nav justify-content-center float-md-end">
                <a class="nav-item nav-link active" href="/"><button class="btn btn-primary navbar-btn">Home <i
                            class="bi bi-house"></i></button></a>
                <a class="nav-link" href="/downloads"><button class="btn btn-primary">Files <i
                            class="bi bi-list-ul"></i></button></a>
                <a class="nav-link" href="/torrents/search?query=top100" target="_blank"><button
                        class="btn btn-primary">Search <i class="bi bi-search"></i></button></a>
                <div class="nav-link">
                    <div class="form-check form-switch">
                        <input type="checkbox" class="form-check-input" id="darkSwitch">
                        <label class="custom-control-label" for="darkSwitch" id="dark-icon"><i
                                class="bi bi-brightness-high"></i></label>
                    </div>

                </div>
            </nav>
        </header>
    </div>
    <div class="container">
        <div id="player-div" class="player-div"></div>
    </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.plyr.io/3.7.2/plyr.js"></script>
    <script>
        var src = window.location.pathname.replace("/stream/dir", "/dir/downloads/");
        var player_div = document.getElementById("player-div");
        player_div.innerHTML =
            '<video id="player" playsinline controls><source src="' +
            src +
            '" type="video/mp4" /></video>';
        const player = new Plyr("video", {
            controls: [
                "play-large",
                "play",
                "progress",
                "current-time",
                "mute",
                "volume",
                "captions",
                "settings",
                "airplay",
                "fullscreen",
                "download",
            ],
            title: src.split("/").pop().split(".")[0],
            ratio: "16:9",
            clickToPlay: true,
            settings: ["captions", "quality", "speed"],
        });
        window.player = player;

        var darkSwitch = document.getElementById("darkSwitch");
        window.addEventListener("load", function () {
            if (darkSwitch) {
                initTheme();
                darkSwitch.addEventListener("change", function () {
                    resetTheme();
                });
            }
        });
        function initTheme() {
            var darkThemeSelected =
                localStorage.getItem("darkSwitch") !== null &&
                localStorage.getItem("darkSwitch") === "dark";
            darkSwitch.checked = darkThemeSelected;
            darkThemeSelected
                ? document.body.setAttribute("data-theme", "dark")
                : document.body.removeAttribute("data-theme");
        }
        function resetTheme() {
            if (darkSwitch.checked) {
                document.body.setAttribute("data-theme", "dark");
                localStorage.setItem("darkSwitch", "dark");
            } else {
                document.body.removeAttribute("data-theme");
                localStorage.removeItem("darkSwitch");
            }
        }
    </script>
</body>

</html>
